---
date: 2024-02-12
title: Фильтр "Сегодня" для Gmail
---

## Фильтр `Сегодня` для Gmail

Задача фильтра показывать переписку за последний период, для того. Сначала письмо помечается фильтром, а после эта метка снимается скриптом.

### Создание фильтра

Пример фильтра для добавления ярлыка `Сегодня`: `newer_than:1d`. При создании фильтра эту фразу необходимо добавить в поле `Has the words`.

- `newer_than:2d` - помечает за последние двое суток
- `newer_than:1d is:inbox` - помечает только входящие

### Автоматическое снятие ярлыка

**Code.gs**

Снимает ярлык со всех старых веток. Необходимо установить на автоматический запуск раз в сутки.

```js
function unmark() {
  const label = GmailApp.getUserLabelByName('Сегодня');
  const threads = GmailApp.search('older_than:1d label:Сегодня');
  threads.forEach((thread) => thread.removeLabel(label));
}
```
